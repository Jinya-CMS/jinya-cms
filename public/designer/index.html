<!doctype html>
<html :class="$store.colorScheme.bodyClass" lang="en" x-data>
<head>
  <meta charset="UTF-8" />
  <title>Jinya CMS Designer</title>
  <link href="/lib/cosmo/alert.css" rel="stylesheet" />
  <link href="/lib/cosmo/buttons.css" rel="stylesheet" />
  <link href="/lib/cosmo/form.css" rel="stylesheet" />
  <link href="/lib/cosmo/layout.css" rel="stylesheet" />
  <link href="/lib/cosmo/list.css" rel="stylesheet" />
  <link href="/lib/cosmo/modal.css" rel="stylesheet" />
  <link href="/lib/cosmo/normalize.css" rel="stylesheet" />
  <link href="/lib/cosmo/progress.css" rel="stylesheet" />
  <link href="/lib/cosmo/scrollbars.css" rel="stylesheet" />
  <link href="/lib/cosmo/tab.css" rel="stylesheet" />
  <link href="/lib/cosmo/table.css" rel="stylesheet" />
  <link href="/lib/cosmo/toolbar.css" rel="stylesheet" />
  <link href="/lib/cosmo/typography.css" rel="stylesheet" />
  <link href="/lib/cosmo/variables.css" rel="stylesheet" />

  <link href="/lib/cosmo/fonts/albert-sans.css" rel="stylesheet" />
  <link href="/lib/cosmo/fonts/oxygen-mono.css" rel="stylesheet" />
  <link href="/lib/cosmo/fonts/urbanist.css" rel="stylesheet" />
  <link href="/designer/lib/jodit/jodit.css" rel="stylesheet" />

  <link href="/designer/css/jodit.css" rel="stylesheet" />
  <link href="/designer/css/cosmo-addons.css" rel="stylesheet" />
  <link href="/designer/css/layout.css" rel="stylesheet" />
  <link href="/designer/css/media.css" rel="stylesheet" />
  <link href="/designer/css/designer.css" rel="stylesheet" />
  <link href="/designer/css/classic-pages.css" rel="stylesheet" />
  <link href="/designer/css/modern-pages.css" rel="stylesheet" />
  <link href="/designer/css/theme.css" rel="stylesheet" />
  <link href="/designer/css/profile.css" rel="stylesheet" />
  <link href="/designer/css/update.css" rel="stylesheet" />
  <link href="/designer/css/query-tool.css" rel="stylesheet" />
  <link href="/designer/css/loader.css" rel="stylesheet" />
  <link href="/designer/css/file-picker.css" rel="stylesheet" />
  <link href="/designer/css/login.css" rel="stylesheet" />
  <link href="/designer/css/ace.css" rel="stylesheet" />
  <link href="/designer/css/forms.css" rel="stylesheet" />
  <link href="/designer/css/menus.css" rel="stylesheet" />
  <link href="/designer/css/blog-categories.css" rel="stylesheet" />
  <link href="/designer/css/blog-post.css" rel="stylesheet" />

  <script src="/designer/js/foundation/ui/components/loader.js"></script>

  <link href="/lib/favicons/favicon-light.png" rel="icon" type="image/png" />
  <link href="/lib/favicons/favicon-dark.png" media="(prefers-color-scheme: dark)" rel="icon" type="image/png" />
  <link href="/lib/favicons/favicon.svg" rel="icon" type="image/svg+xml" />
  <link href="/lib/favicons/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180" />
  <link href="/lib/favicons/site.webmanifest" rel="manifest" />

  <link color="#19324c" href="/lib/favicons/safari-pinned-tab.svg" rel="mask-icon" />

  <meta content="width=device-width, initial-scale=1" name="viewport" />
  <meta content="Jinya CMS" name="apple-mobile-web-app-title" />
  <meta content="Jinya CMS" name="application-name" />
  <meta content="#19324c" name="msapplication-TileColor" />
  <meta content="#19324c" name="theme-color" />
</head>
<body :class="{ 'is--login': !($store.authentication.loggedIn && $store.loaded) || !$store.loaded }">
<main class="cosmo-page">
  <template x-if="$store.authentication.loggedIn">
    <div class="cosmo-menu is--top">
      <template x-if="$store.navigation.stage === 'frontstage'">
        <div class="cosmo-menu__row">
          <a
            class="cosmo-menu__item"
            href="/designer/backstage/maintenance/updates"
            x-localize:maintenance-menu-title
          ></a>
          <a class="cosmo-menu__item" href="/designer/backstage/database/mysql-info" x-localize:database-menu-title>
          </a>
          <a class="cosmo-menu__item" href="/designer/backstage/artists/index" x-localize:artists-menu-title> </a>
        </div>
      </template>
      <template x-if="$store.navigation.stage === 'backstage'">
        <div class="cosmo-menu__row">
          <a class="cosmo-menu__item" href="/designer/frontstage/media/files" x-localize:media-menu-title> </a>
          <a
            class="cosmo-menu__item"
            href="/designer/frontstage/pages-and-forms/simple-pages"
            x-localize:pages_and_forms-menu-title
          >
          </a>
          <a class="cosmo-menu__item" href="/designer/frontstage/blog/categories" x-localize:blog-menu-title> </a>
          <a class="cosmo-menu__item" href="/designer/frontstage/design/menus" x-localize:design-menu-title> </a>
          <a
            class="cosmo-menu__item"
            href="/designer/frontstage/my-jinya/my-profile"
            x-localize:my_jinya-menu-title
          >
          </a>
        </div>
      </template>
      <img :alt="$store.artist.artistName" :src="$store.artist.profilePicture" class="cosmo-profile-picture" />
      <a @click="$store.authentication.logout(true)" class="cosmo-menu__item is--right" x-localize:top_menu-logout></a>
    </div>
  </template>
  <template x-if="$store.authentication.loggedIn">
    <div class="cosmo-menu">
      <button class="cosmo-back-button" type="button"></button>
      <template x-if="$store.navigation.stage === 'frontstage'">
        <nav class="cosmo-menu__collection">
          <div class="cosmo-menu__row is--main">
            <a
              class="cosmo-menu__item"
              href="/designer/frontstage/media/files"
              x-active-route.area="media"
              x-localize:media-menu-title
            >
            </a>
            <a
              class="cosmo-menu__item"
              href="/designer/frontstage/pages-and-forms/classic-pages"
              x-active-route.area="pages-and-forms"
              x-localize:pages_and_forms-menu-title
            >
            </a>
            <a
              class="cosmo-menu__item"
              href="/designer/frontstage/blog/categories"
              x-active-route.area="blog"
              x-localize:blog-menu-title
            >
            </a>
            <a
              class="cosmo-menu__item"
              href="/designer/frontstage/design/menus"
              x-active-route.area="design"
              x-localize:design-menu-title
            >
            </a>
            <a
              class="cosmo-menu__item"
              href="/designer/frontstage/my-jinya/my-profile"
              x-active-route.area="my-jinya"
              x-localize:my_jinya-menu-title
            >
            </a>
          </div>
          <template x-if="$store.navigation.area === 'media'">
            <div class="cosmo-menu__row is--sub">
              <a
                class="cosmo-menu__item"
                href="/designer/frontstage/media/files"
                x-active-route="files"
                x-localize:media-menu-files
              >
              </a>
              <a
                class="cosmo-menu__item"
                href="/designer/frontstage/media/galleries"
                x-active-route="galleries"
                x-localize:media-menu-galleries
              >
              </a>
            </div>
          </template>
          <template x-if="$store.navigation.area === 'pages-and-forms'">
            <div class="cosmo-menu__row is--sub">
              <a
                class="cosmo-menu__item"
                href="/designer/frontstage/pages-and-forms/classic-pages"
                x-active-route="classic-pages"
                x-localize:pages_and_forms-menu-classic_pages
              >
              </a>
              <a
                class="cosmo-menu__item"
                href="/designer/frontstage/pages-and-forms/modern-pages"
                x-active-route="modern-pages"
                x-localize:pages_and_forms-menu-modern_pages
              >
              </a>
              <a
                class="cosmo-menu__item"
                href="/designer/frontstage/pages-and-forms/forms"
                x-active-route="forms"
                x-localize:pages_and_forms-menu-forms
              >
              </a>
            </div>
          </template>
          <template x-if="$store.navigation.area === 'blog'">
            <div class="cosmo-menu__row is--sub">
              <a
                class="cosmo-menu__item"
                href="/designer/frontstage/blog/categories"
                x-active-route="categories"
                x-localize:blog-menu-categories
              >
              </a>
              <a
                class="cosmo-menu__item"
                href="/designer/frontstage/blog/posts"
                x-active-route="posts"
                x-localize:blog-menu-posts
              >
              </a>
              <span
                class="cosmo-menu__item"
                x-active-route="editor"
                x-localize:blog-menu-post_editor
              >
              </span>
            </div>
          </template>
          <template x-if="$store.navigation.area === 'design'">
            <div class="cosmo-menu__row is--sub">
              <a
                class="cosmo-menu__item"
                href="/designer/frontstage/design/menus"
                x-active-route="menus"
                x-localize:design-menu-menus
              >
              </a>
              <a
                class="cosmo-menu__item"
                href="/designer/frontstage/design/themes"
                x-active-route="themes"
                x-localize:design-menu-themes
              >
              </a>
            </div>
          </template>
          <template x-if="$store.navigation.area === 'my-jinya'">
            <div class="cosmo-menu__row is--sub">
              <a
                class="cosmo-menu__item"
                href="/designer/frontstage/my-jinya/my-profile"
                x-active-route="my-profile"
                x-localize:my_jinya-menu-my_profile
              >
              </a>
              <a
                class="cosmo-menu__item"
                href="/designer/frontstage/my-jinya/active-sessions"
                x-active-route="active-sessions"
                x-localize:my_jinya-menu-active_sessions
              >
              </a>
              <a
                class="cosmo-menu__item"
                href="/designer/frontstage/my-jinya/active-devices"
                x-active-route="active-devices"
                x-localize:my_jinya-menu-active_devices
              >
              </a>
            </div>
          </template>
        </nav>
      </template>
      <template x-if="$store.navigation.stage === 'backstage'">
        <nav class="cosmo-menu__collection">
          <div class="cosmo-menu__row is--main">
            <a
              class="cosmo-menu__item"
              href="/designer/backstage/maintenance/updates"
              x-active-route.area="maintenance"
              x-localize:maintenance-menu-title
            ></a>
            <a
              class="cosmo-menu__item"
              href="/designer/backstage/database/mysql-info"
              x-active-route.area="database"
              x-localize:database-menu-title
            >
            </a>
            <a
              class="cosmo-menu__item"
              href="/designer/backstage/artists/index"
              x-active-route.area="artists"
              x-localize:artists-menu-title
            ></a>
          </div>
          <template x-if="$store.navigation.area === 'maintenance'">
            <div class="cosmo-menu__row is--sub">
              <a
                class="cosmo-menu__item"
                href="/designer/backstage/maintenance/updates"
                x-active-route="updates"
                x-localize:maintenance-menu-update
              >
              </a>
              <a
                class="cosmo-menu__item"
                href="/designer/backstage/maintenance/environment"
                x-active-route="environment"
                x-localize:maintenance-menu-app_config
              >
              </a>
              <a
                class="cosmo-menu__item"
                href="/designer/backstage/maintenance/php-info"
                x-active-route="php-info"
                x-localize:maintenance-menu-php_info
              >
              </a>
            </div>
          </template>
          <template x-if="$store.navigation.area === 'database'">
            <div class="cosmo-menu__row is--sub">
              <a
                class="cosmo-menu__item"
                href="/designer/backstage/database/mysql-info"
                x-active-route="mysql-info"
                x-localize:database-menu-mysql_info
              >
              </a>
              <a
                class="cosmo-menu__item"
                href="/designer/backstage/database/tables"
                x-active-route="tables"
                x-localize:database-menu-tables
              >
              </a>
              <a
                class="cosmo-menu__item"
                href="/designer/backstage/database/query-tool"
                x-active-route="query-tool"
                x-localize:database-menu-query_tool
              >
              </a>
            </div>
          </template>
          <template x-if="$store.navigation.area === 'artist'">
            <div class="cosmo-menu__row is--sub">
              <a
                class="cosmo-menu__item"
                href="/designer/backstage/artist/index"
                x-active-route.area="artists"
                x-localize:artists-menu-artists
              >
              </a>
            </div>
          </template>
        </nav>
      </template>
    </div>
  </template>
  <div :class="{ 'cosmo-page__body': $store.authentication.loggedIn && $store.loaded }" id="app">
    <template
      x-route="/login"
      x-handler="[$store.authentication.needsLogout, $store.navigation.fetchScript]"
      x-template="/designer/templates/authentication/login.html"
    ></template>
    <template
      x-route="notfound"
      x-handler="(ctx) => ctx.redirect('/frontstage/media/files')"></template>

    <template
      x-route="/frontstage/media/files"
      x-handler="[$store.authentication.needsLogin, $store.navigation.fetchScript]"
      x-template="/designer/templates/frontstage/media/files.html"
    ></template>
    <template
      x-route="/frontstage/media/galleries"
      x-handler="[$store.authentication.needsLogin, $store.navigation.fetchScript]"
      x-template="/designer/templates/frontstage/media/galleries.html"
    ></template>

    <template
      x-route="/frontstage/pages-and-forms/classic-pages"
      x-handler="[$store.authentication.needsLogin, $store.navigation.fetchScript]"
      x-template="/designer/templates/frontstage/pages-and-forms/classic-pages.html"
    ></template>
    <template
      x-route="/frontstage/pages-and-forms/modern-pages"
      x-handler="[$store.authentication.needsLogin, $store.navigation.fetchScript]"
      x-template="/designer/templates/frontstage/pages-and-forms/modern-pages.html"
    ></template>
    <template
      x-route="/frontstage/pages-and-forms/forms"
      x-handler="[$store.authentication.needsLogin, $store.navigation.fetchScript]"
      x-template="/designer/templates/frontstage/pages-and-forms/forms.html"
    ></template>

    <template
      x-route="/frontstage/blog/categories"
      x-handler="[$store.authentication.needsLogin, $store.navigation.fetchScript]"
      x-template="/designer/templates/frontstage/blog/categories.html"
    ></template>
    <template
      x-route="/frontstage/blog/posts"
      x-handler="[$store.authentication.needsLogin, $store.navigation.fetchScript]"
      x-template="/designer/templates/frontstage/blog/posts.html"
    ></template>

    <template
      x-route="/frontstage/design/menus"
      x-handler="[$store.authentication.needsLogin, $store.navigation.fetchScript]"
      x-template="/designer/templates/frontstage/design/menus.html"
    ></template>
    <template
      x-route="/frontstage/design/themes"
      x-handler="[$store.authentication.needsLogin, $store.navigation.fetchScript]"
      x-template="/designer/templates/frontstage/design/themes.html"
    ></template>

    <template
      x-route="/frontstage/my-jinya/my-profile"
      x-handler="[$store.authentication.needsLogin, $store.navigation.fetchScript]"
      x-template="/designer/templates/frontstage/my-jinya/my-profile.html"
    ></template>
    <template
      x-route="/frontstage/my-jinya/active-sessions"
      x-handler="[$store.authentication.needsLogin, $store.navigation.fetchScript]"
      x-template="/designer/templates/frontstage/my-jinya/active-sessions.html"
    ></template>
    <template
      x-route="/frontstage/my-jinya/active-devices"
      x-handler="[$store.authentication.needsLogin, $store.navigation.fetchScript]"
      x-template="/designer/templates/frontstage/my-jinya/active-devices.html"
    ></template>

    <template
      x-route="/backstage/maintenance/updates"
      x-handler="[$store.authentication.needsAdmin, $store.navigation.fetchScript]"
      x-template="/designer/templates/backstage/maintenance/updates.html"
    ></template>
    <template
      x-route="/backstage/maintenance/environment"
      x-handler="[$store.authentication.needsAdmin, $store.navigation.fetchScript]"
      x-template="/designer/templates/backstage/maintenance/environment.html"
    ></template>
    <template
      x-route="/backstage/maintenance/php-info"
      x-handler="[$store.authentication.needsAdmin, $store.navigation.fetchScript]"
      x-template="/designer/templates/backstage/maintenance/php-info.html"
    ></template>

    <template
      x-route="/backstage/database/mysql-info"
      x-handler="[$store.authentication.needsAdmin, $store.navigation.fetchScript]"
      x-template="/designer/templates/backstage/database/mysql-info.html"
    ></template>
    <template
      x-route="/backstage/database/tables"
      x-handler="[$store.authentication.needsAdmin, $store.navigation.fetchScript]"
      x-template="/designer/templates/backstage/database/tables.html"
    ></template>
    <template
      x-route="/backstage/database/query-tool"
      x-handler="[$store.authentication.needsAdmin, $store.navigation.fetchScript]"
      x-template="/designer/templates/backstage/database/query-tool.html"
    ></template>

    <template
      x-route="/backstage/artists/index"
      x-handler="[$store.authentication.needsAdmin, $store.navigation.fetchScript]"
      x-template="/designer/templates/backstage/artists/index.html"
    ></template>
  </div>
  <template x-if="$store.authentication.loggedIn">
    <div class="cosmo-bottom-bar is--three-column">
      <div class="cosmo-bottom-bar__item is--left">
        <span class="cosmo-input__message is--negative" x-text="$store.uploadProgress.errorMessage"></span>
      </div>
      <div class="cosmo-bottom-bar__item is--center jinya-progress"
           x-show="$store.uploadProgress.filesUploaded !== $store.uploadProgress.filesToUpload">
        <span class="cosmo-progress-bar__label" x-localize:bottom_bar-uploading></span>
        <progress :max="$store.uploadProgress.filesToUpload" :value="$store.uploadProgress.filesUploaded"
                  class="cosmo-progress-bar"></progress>
        <span class="cosmo-progress-bar__label" id="file-upload-progress-bottom-label"
              x-text="$store.uploadProgress.status"></span>
      </div>
      <div class="cosmo-bottom-bar__item is--right">
        <button
          @click="$store.colorScheme.updateTheme"
          class="cosmo-button is--circle is--large is--primary"
          id="toggle-theme-button"
          x-html="$store.colorScheme.button"
        ></button>
      </div>
    </div>
  </template>
  <div class="jinya-loader__container" style="min-height: 100vh" x-show="!$store.loaded">
    <cms-loader></cms-loader>
  </div>
</main>

<script src="/designer/js/index.js" type="module"></script>
</body>
</html>
